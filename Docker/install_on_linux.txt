# Don't use snap to install docker, because we run into several problems!

To install docker, we have to use the binaries as follows:

$ wget https://master.dockerproject.org/linux/x86_64/docker.tgz
$ tar -xf docker.tgz
$ sudo cp -R ./docker /usr/local/bin

At this point, we need to confing the unit files to run the service of docker. To that end, just copy the service and socket file into /etc/systemd/system. These files are in https://github.com/moby/moby/tree/master/contrib/init/systemd.

Once we do that, enable docker service:
$ sudo systemctl daemon-reload
$ sudo systemctl enable docker


$ ps aux | grep dockerd
.. --config-file=/var/snap/docker/1779/config/daemon.json

Now that we have the path to the daemon.json, we add the pars proxy:

$$$$$$$$$$$
{
    "registry-mirrors": ["https://registry.docker.ir"]
}
$$$$$$$$$4$

Now, we need to reload the service, and docker as well:
$ systemctl daemon-reload
$ snap restart docker