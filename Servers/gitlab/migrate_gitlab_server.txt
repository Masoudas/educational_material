NOTE: This transfer does not move ssh keys, and server id.

First create a backup from the current version. To create a backup, we need to have rsync installed. Then, UNCOMMENT the following to /etc/gitlab/gitlab.rb (don't change it!)

# gitlab_rails['backup_gitaly_backup_path'] = '/opt/gitlab/embedded/bin/gitaly-backup'

To change backup path, change:
# gitlab_rails['backup_path'] = "/var/opt/gitlab/backups"

To create an actual backup, run the following command, and the result is in $GITLAB_HOME/gitlab/data/backup:
$ docker exec -it GITLAB_DOCKER gitlab-rake gitlab:backup:create

$$$$$ Restore process
The backup file must can be found in the backup path, which is defined in the configuration file /etc/gitlab/gitlab.rb by the key gitlab_rails['backup_path'].

Rerun the gitlab instance. Next, run the following command:
$ docker exec -it gitlab1083 gitlab-rake gitlab:backup:restore --trace