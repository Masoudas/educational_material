To remedy the uniqueness of nulls, especially when it comes to indexing, we'd use the expression 'UNIQUE NULLS NOT DISTINCT' in the unique constraint:

CREATE TABLE new_style
(
id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
val1 TEXT NOT NULL,
val2 TEXT NULL,
CONSTRAINT uq_val1_val2_new UNIQUE NULLS NOT DISTINCT (val1, val2)
);

Now, a null is treated as unique, and if inserted again, an error is raised.